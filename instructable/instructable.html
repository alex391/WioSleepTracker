<!doctype html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- thanks https://highlightjs.org/-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script>
    function escapeHtml(text) { // Thanks https://stackoverflow.com/a/4835406
      const map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
      };

      return text.replace(/[&<>"']/g, function (m) { return map[m]; });
    }

    $(document).ready(function () {
      $.ajax({ // Thanks to https://stackoverflow.com/a/19325006
        async: true,
        url: '../SleepTracker/SleepTracker.ino',
        dataType: 'text',
        success: function (data) {
          $('#sketch').append(escapeHtml(data));
          hljs.highlightAll();
        }
      });
    });
  </script>
  <link rel="stylesheet" href="styles.css">
  <title>WIO Terminal Sleep tracker</title>
</head>

<body>
  <h1>WIO Terminal Sleep tracker</h1>
  <h2>Description</h2>
  <p>A sleep tracker, inspired by apps like
    <a href="https://play.google.com/store/apps/details?id=sleeptrakcer.sleeprecorder.sleepapp.sleep">Sleep Tracker</a>
  </p>
  <h2>Parts list</h2>
  <ul>
    <li>
      <a href="https://wiki.seeedstudio.com/Wio_Terminal_Intro/">Seeed studio WIO Terminal</a>
    </li>
    <li>
      <a href="https://www.amazon.com/s?k=usb+battery+pack">Any USB battery pack</a> because the first-party one doesn't
      last all night. About $25.
    </li>
  </ul>
  <h2>Video</h2>
  <video controls>
    <source src="media/sleep.webm">
  </video>
  <h2>Steps</h2>
  <ol>
    <li>Upload the <a href="#code">code</a> to the WIO Terminal</li>
    <li>Plug in the battery pack</li>
    <li>Set the clock and the alarm, press C to continue</li>
    <li>Sleep</li>
    <li>Press B to stop sleep, if the alarm is not going off</li>
  </ol>
  <img src="media/project.webp" alt="WIO Terminal and battery pack, plugged into each other">

  <h2 id="code">Code</h2>
  <pre>
    <code class="language-cpp" id="sketch"></code>
  </pre>
</body>

</html>
